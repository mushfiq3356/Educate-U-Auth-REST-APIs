meta {
  name: agent renew
  type: http
  seq: 8
}

post {
  url: {{baseUrl}}/business-development-management/agent/renew/42b8c91a-b22d-43c7-a180-d8c3b8e8c6e6
  body: json
  auth: bearer
}

headers {
  ~Content-Type: application/pdf
}

auth:bearer {
  token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxYmViMzNjOS0zZmNiLTRjMzktOTExMy0yZmJlY2Y2NGI5MDUiLCJ1c2VyUG9ydGFsQ2F0ZWdvcnlJZCI6IjVjOTc3NTgwLWZjMDMtNGIyNC04Yzg2LTFkZWM5NGU3NmZiZiIsImlhdCI6MTc0NDk3NzUxMCwiZXhwIjoxNzQ2MjczNTEwfQ.hEwTTyjIUdRuhbNwYRw6J84Me3ztYWLP9Dv5okJ1SsU
}

body:json {
  {
      "agreement": "<h1>Your HTML Content</h1><p>Agreement EXTERNAL terms here...</p>",
      "templateType": "EXTERNAL"
  }
}

script:post-response {
  var template = `
  <style type="text/css">
      .tftable {font-size:14px;color:#333333;width:100%;border-width: 1px;border-color: #87ceeb;border-collapse: collapse;}
      .tftable th {font-size:18px;background-color:#87ceeb;border-width: 1px;padding: 8px;border-style: solid;border-color: #87ceeb;text-align:left;}
      .tftable tr {background-color:#ffffff;}
      .tftable td {font-size:14px;border-width: 1px;padding: 8px;border-style: solid;border-color: #87ceeb;}
      .tftable tr:hover {background-color:#e0ffff;}
  </style>
  
  <table class="tftable" border="1">
      <tr>
          <th>Content Type</th>
          <th>Response</th>
      </tr>
      <tr>
          <td>{{response.headers["Content-Type"]}}</td>
          <td>PDF content</td>
      </tr>
  </table>
  `;
  
  function constructVisualizerPayload() {
  //     return {response: pm.response};
  }
  
  // pm.visualizer.set(template, constructVisualizerPayload());
}

settings {
  encodeUrl: true
}
